1. Thêm action bar




1. Thêm action bar
<include layout="@layout/layout_action_bar" />

2. Action mode

mMode.finish();		-> 	

if (hasCheckedItems) {
                    int countSelected = mAdapter.getSelectedCount();
                    if(mActionBar.getActionMode() == null) {
                        ActionBarMenu actionMode = mActionBar.createActionMode();
                        actionMode.addItemResource(ACTION_MODE_BACK, R.layout.action_mode_back);
                        tvActionModeTitle = (TextView)actionMode.addItemResource(ACTION_MODE_TITLE, R.layout.action_mode_title, 1);
                        actionMode.addItemResource(ACTION_MODE_SELECT_ALL, R.layout.contextual_action_bar_menu_selectall);
                        actionMode.addItemResource(ACTION_MODE_DELETE, R.layout.contextual_action_bar_menu_delete);
                        expandAllListSuggestRequest();

                        try {
                            ActionLog.startLog(ActionConstant.PB_TAB_SUGGEST_FRIEND_LONG_PRESS_ITEM, "");
                            ActionLog.endLog();
                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                    }
                    mActionBar.showActionMode();
                    tvActionModeTitle.setText(String.format(getResources().getString(R.string.action_mode_delete_suggest_title), countSelected));
                    result = true;
                } else {
                    mActionBar.hideActionMode();
                    mAdapter.removeSelections();
                    result = false;
                }

3. checkHasFragmentOnStackTop -> getTopZaloView


4. Check lại tất cả // t2h requestPermissions


5. Check lại tất cả // t2h dialogFragment

6. startSupportActionMode - cài đặt lại actionMode mới

7. // t2h need implement


8. public void onDestroy()

04-01 18:36:32.349 3917-3917/com.zing.zalo E/MainTabView: error
                                                          java.lang.ClassCastException: com.zing.zalo.ui.zviews.NeedImplementZaloView cannot be cast to android.support.v4.app.Fragment
                                                              at com.zing.zalo.ui.zviews.MainTabView.findFragment(MainTabView.java:1749)
                                                              at com.zing.zalo.ui.zviews.MainTabView$2.onReceive(MainTabView.java:262)
                                                              at android.support.v4.content.LocalBroadcastManager.executePendingBroadcasts(LocalBroadcastManager.java:297)
                                                              at android.support.v4.content.LocalBroadcastManager.access$000(LocalBroadcastManager.java:46)
                                                              at android.support.v4.content.LocalBroadcastManager$1.handleMessage(LocalBroadcastManager.java:116)
                                                              at android.os.Handler.dispatchMessage(Handler.java:107)
                                                              at android.os.Looper.loop(Looper.java:194)
                                                              at android.app.ActivityThread.main(ActivityThread.java:5371)
                                                              at java.lang.reflect.Method.invokeNative(Native Method)
                                                              at java.lang.reflect.Method.invoke(Method.java:525)
                                                              at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:833)
                                                              at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
                                                              at dalvik.system.NativeStart.main(Native Method)

2. Chuyển MainTabView

	public void onDestroy()

	ContactGroupMyPagesView.java

	public void onDestroyActionMode
	
	// pause or resume video view on timeline

++++++++++++++++++


10. Chuyển MessagesView

	deleteMultiSelectedMessage
	
	
11. Gắn search view

 @Override
    public void onCreateOptionsMenu(ActionBarMenu menu) {
        super.onCreateOptionsMenu(menu);
        try {
            ActionBarMenuItem item = menu.addItem(0, android.R.drawable.ic_menu_search);
            item.setIsSearchField(true, true);
            item.setActionBarMenuItemSearchListener(searchListener);
            edtSearchView = item.getSearchField();
            if(edtSearchView != null)
                edtSearchView.setHint(getString(R.string.hint_default_search));
            //menu.openSearchField(true, "");
        } catch (Exception e) {
            // TODO: handle exception
        }
    }
	

13. 

		public static final String EXTRA_LANGUAGE_CHANGED = "EXTRA_LANGUAGE_CHANGED";
    public static final String EXTRA_FONT_CHANGED = "EXTRA_FONT_CHANGED";
	
	Chuyển từ lớp BaseActivity sang ZaloActivityBase
	

14. 

		
		ở những nơi mà cần Intent để mở lại Zalo với một view nào đó (như từ notification) thì mọi người phải dùng 
		Intent intent = IntentUtils.makeIntentShowZaloView(cls, data);
        startActivity(intent); ----> mới có sign để work được
		
	
	
	
	
	
	


 


 http://www.programcreek.com/java-api-examples/android.view.WindowManager
 
 http://upshots.org/android/android-windowmanager-for-overlays
 
 @Override
    public void onCreate() {
        super.onCreate();
        Toast.makeText(getBaseContext(),"onCreate", Toast.LENGTH_LONG).show();
        mView = new HUDView(this);
        WindowManager.LayoutParams params = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
                WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,
                PixelFormat.TRANSLUCENT);
        params.gravity = Gravity.RIGHT | Gravity.TOP;
        params.setTitle("Load Average");
        WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);
        wm.addView(mView, params);
    }
	
	
	class HUDView extends ViewGroup {
    private Paint mLoadPaint;

    public HUDView(Context context) {
        super(context);
        Toast.makeText(getContext(),"HUDView", Toast.LENGTH_LONG).show();

        mLoadPaint = new Paint();
        mLoadPaint.setAntiAlias(true);
        mLoadPaint.setTextSize(10);
        mLoadPaint.setARGB(255, 255, 0, 0);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawText("Hello World", 5, 15, mLoadPaint);
    }

    @Override
    protected void onLayout(boolean arg0, int arg1, int arg2, int arg3, int arg4) {
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        //return super.onTouchEvent(event);
        Toast.makeText(getContext(),"onTouchEvent", Toast.LENGTH_LONG).show();
        return true;
    }
}



############################


	
	