https://github.com/jaredrummler/AndroidProcesses

http://muzso.hu/2012/01/18/how-to-tell-which-processes-are-going-to-be-killed-first-by-the-linux-kernels-oom-killer

http://serverfault.com/questions/571319/how-is-kernel-oom-score-calculated

http://forum.xda-developers.com/showthread.php?t=2751559

http://stackoverflow.com/questions/30619349/android-5-1-1-and-above-getrunningappprocesses-returns-my-application-packag/32366476#32366476

http://superuser.com/questions/223677/recovering-a-corrupted-txt-file

https://notepad-plus-plus.org/community/topic/10835/recover-or-fix-corrupted-txt-file








++++++++++++++++++++++++++++

- Cần init các giá trị passcode trong mainapplication khi start bất kỳ process nào, như hiện tại start zalo process mới làm điều đó, nếu các process khác khi home và app bị kill sẽ ko load lại được và chạy bị sai

- Tạo ra biến processId, chỉ khởi tạo trong zalo process, để biết nếu bằng giá trị mặc định là ở các process khác, 
		+ lúc này nếu thỏa đk onStop sẽ bắn broadcast cho process zalo biết để update giá trị needToShowPassCodeScreen từ sharedpreference
		
		+ ngược lại sau khi process zalo chạy xong, nếu unlock bằng pass code rồi thì lần sau back về màn hình của process khác, cần móc giá trị needToShowPassCodeScreen từ sharedpreference 
		
- Passcode activity cần làm là multiFragmentActivity và show fragment bên trong để giải quyết vấn đề nhặp nhằng giữa việc đang show activity pass code đòi hỏi show tiếp fragment passcode hoặc ngược lại

- Chuyển Passcode activity show fragment bên trong để giải quyết việc đổi qua lại giữa activity và fragment phát sinh vấn đề khi thiết lập passcode ko ở lại được màn hình setting
		
		-> Cần set result ok cho activity trước khi finish
		
		
		
++++++++++++++++++++++++++++++++


- Tạo ra GlobalData.isShowingPasscodeFragment để check là đang show passcode, vì giờ ko còn gọi finish khi stop hoặc showFragment k lấy được cái classOnPause là Passcode
  
- Tạo ra GlobalData.iProcessId để check nếu từ các process khác thì sẽ đọc biến từ sharedpreference để đảm bảo giá trị

- Nếu là showFragment Passcode từ 1 MultiFragmentActivity thì cần show trong resume, tránh show trong onStart vì có thể sẽ show trước các fragment hiện tại của MultiFragmentActivity trong trường hợp đang home quay trở lại

		Vì thế chỗ cần show passcode fragment trong onStart sẽ gán lại GlobalData.needToShowPassCodeScreen = true để show khi chạy check trong onResume
		
		

- 21 / 1 / 2016 Lỗi, test case: vào setting privacy mở thiết lập passcode, nếu đã có passcode rồi, sẽ show màn hình passcode từ activity, lúc này mở hay đóng sẽ bị chớp đen

- 21 / 1 / 2016 Lỗi, test: home app ở 1 activity bất kỳ, để app bị kill, khi resume app, sẽ chạy lại hàm onCreate, lúc này có đảm bảo show được passcode không?	-> test bật don't keep
			-> onCreate truong hop app bi kill khong chay vao ham check passcode
			
			
- 21 / 1 / 2016
			Check thêm điều kiện ở các màn hình có thể mở từ notify	
					FeedDetailsFragment.java		-		FeedDetailsActivity
					UpdateStatusFragment.java		- 		UpdateStatusActivity		PENDING
															ImageCommentActivity
					
			Mở các 				
					
					
					
			Đang ở các màn hình mở từ notify, nếu tiếp tục nhận notify và mở thì xử lý thế nào vì lúc này chạy onNewIntent, chứ ko chạy onCreate
			
			
			Chú ý mở 
			
			
- 22 / 1 / 2016 Lỗi
			Nếu các activity đang chạy đơn, ví dụ cửa sổ chat mở từ notify, hiện passcode, nhập xong passcode show chatFragment, lúc này tiếp tục nhận notify, mở vào, đúng là ko hiện passcode, nhưng lại hiện		
			
			
- 20 / 1 / 2016
			Gọi finish activity trong onStop của PassCodeActivity khi màn hình off sẽ bị loop do gọi stop thì dẫn đến màn hình trước đó gọi start, lại thỏa đk show passcode gọi show lại, show lên lại bị gọi stop do màn hình off
			Khi screen ON mới cho làm flow finish Passcode
			
					
			
1. Remove equals(PasscodeActivity.TAG), vì chuyển qua fragment sẽ bỏ đi gán GlobalData.clsInPause = (PasscodeActivity.TAG)



///////// 4 / 2 / 2016

- Để chuyển thành show fragment, cần xử lý case GlobalData.clsInPause.equals(PasscodeActivity.TAG), vì onStop sẽ k gán lại GlobalData.clsInPause trong fragment

	Tìm và làm với nhưng fragment mở từ Notification
			- ChatFragment.java
			
			+ App chưa start:	- Nhận tin nhắn show notify, bấm vào notify, show passcode, 
			
			
///////// 17 / 02 / 2016
	- Move GlobalData.returnFromStartActForResult = true; to 
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        try {
            if (Utils.isAppUsePassCode()) {
                GlobalData.returnFromStartActForResult = true;
                SharedPreferencesData.setReturnFromStartActForResult(MainApplication.getAppContext(), GlobalData.returnFromStartActForResult);
            }
			
	- requestCode == REQUEST_CODE_UPDATE_STATUS - MyInfoFragment
		if (Utils.isAppUsePassCode()) {
                                boolean appCallFromBackground = bundle.containsKey("needToShowPassCodeScreen") ? bundle.getBoolean("needToShowPassCodeScreen") : false;
                                String classLastPause = bundle.containsKey("clsInPause") ? bundle.getString("clsInPause") : "";

                                if (appCallFromBackground) {
                                    GlobalData.specialToShowPassCodeScreen = true;
                                    SharedPreferencesData.setSpecialToShowPassCodeScreen(MainApplication.getAppContext(), GlobalData.specialToShowPassCodeScreen);

                                    if (!TextUtils.isEmpty(classLastPause) && !classLastPause.equals(((Object) this).getClass().getSimpleName())) {
                                        GlobalData.returnFromStartActForResult = false;
                                        SharedPreferencesData.setReturnFromStartActForResult(MainApplication.getAppContext(), GlobalData.returnFromStartActForResult);
                                    }
                                }
                            }
							
    - (requestCode == GlobalData.REQUESTCODE_UPDATE_STATUS) - TimelineFragmentActivity

if (Utils.isAppUsePassCode()) {
                                        boolean appCallFromBackground = bundle.containsKey("needToShowPassCodeScreen") ? bundle.getBoolean("needToShowPassCodeScreen") : false;
                                        String classLastPause = bundle.containsKey("clsInPause") ? bundle.getString("clsInPause") : "";

                                        if (appCallFromBackground) {
                                            GlobalData.specialToShowPassCodeScreen = true;
                                            SharedPreferencesData.setSpecialToShowPassCodeScreen(MainApplication.getAppContext(), GlobalData.specialToShowPassCodeScreen);

                                            if (!TextUtils.isEmpty(classLastPause) && !classLastPause.equals(((Object) MainFragment.getInstance()).getClass().getSimpleName())) {
                                                GlobalData.returnFromStartActForResult = false;
                                                SharedPreferencesData.setReturnFromStartActForResult(MainApplication.getAppContext(), GlobalData.returnFromStartActForResult);
                                            }
                                        }
                                    }	
									
									
    - Bỏ reset các giá trị trong hàm Utils.setLockByPassCode									
		Sẽ chỉ reset khi nhập đúng passcode và close
		
	
	- Do chạy trong mHandlerUI post nên có thể sẽ chạy sau onResume của activity, do đó ko show được passcode, 
	 -> Giải quyết move các đk check passcode trong fragment ra các activity show fragment từ notify để bảo đảm đúng
	 
		public void showFragmentFromNewIntent(final FragmentType fragmentType, final Bundle data, final int animationEnter, final int animationExit) {
        mHandlerUI.post(new Runnable() {
            @Override
            public void run() {
                showFragmentForResult(fragmentType, data, null, 0, animationEnter, animationExit);
            }
        });
    }
	
	- Dùng SingleTask bỏ việc phải đi finish Activity khi onStop
	
	- Không thể dùng SingleInstance hoặc Single Task được vì case vào MainTab, show passcode, nhận notify chat, mở lên, thì gọi show lại passcode lúc này ChatActivity sẽ bị finish theo cơ chế của SingleTAsk
	
	- Thêm isShowingPasscodeFragment để check là passcode khóa app đang được show, mặc dù có onStop và bị destroy đi nữa
	
	
	- Bỏ tất cả những chỗ check notify
		
		+ ChatFragment			- Utils.isAppUsePassCode(), 
			Test lại: 
				+ Nhận notify và mở khi đang
					1. 
					
					
        + FeedDetailsFragment - FeedDetailsActivity	

		+ ImageCommentActivity

		+ GroupActivity
		
		+ TempShareViaActivity
		
		+ MyInfoFragment - MyInfoActivity
		
		+ NotificationFragment - NotificationActivity
		
		+ SuggestFriendListFragment - SuggestFriendListActivity
		
		+ UserDetailsFragment - UserDetailsActivity
		
		+ ExternalCallSplashActivity
		
		
		
		
		+ MainTab -> (có / ko passcode) -> off / on screen (tức thì hoặc đợi 1 lát) -> passcode (PASS)
		
		+ MainTab -> Mở app Setting hệ thống -> back -> passcode (PASS) -> input -> Maintab
		
		+ MainTab -> mở notify tin nhắn Viber -> Viber App 	*-> back -> passcode (PASS) -> input -> Maintab
															*-> home -> icon app zalo -> passcode (PASS) -> input -> Maintab
															
		+ MainTab -> nhận cuộc gọi native -> ko fire được sự kiện onStop -> end call -> ko show passcode (FAIL)
		
		+ MainTab -> passcode	-> nhận cuộc gọi native -> ko fire được sự kiện onStop -> end call -> ko show passcode (FAIL)
		
		+ MainTab -> passcode -> mở từ notify tin nhắn mới -> passcode (PASS) -> input -> Chat (PASS) 	*-> off / on screen (tức thì hoặc đợi 1 lát) -> show passcode   ==> PASS
																										*-> home -> icon app -> passcode (PASS) -> off / on screen (tức thì hoặc đợi 1 lát) -> show passcode   ==> PASS
		
		+ MainTab -> Chat Fragment -> home -> mở từ notify tin nhắn mới -> passcode (PASS) -> mở từ notify tin nhắn mới -> passcode (PASS) 	*-> off / on screen (tức thì hoặc đợi 1 lát) -> passcode (PASS)
																																			*-> home -> icon app -> passcode (PASS) -> off / on screen (tức thì hoặc đợi 1 lát) -> show passcode   ==> PASS
		
		
		
		
		+ MainTab -> (có / ko passcode) -> home 	-> QR droid quét QR profile -> profile -> passcode 	-> input -> profile *-> home -> icon app -> passcode -> MainTab ??? (mở lại task mới)
		
																															*-> back -> vào lại link qr -> passcode (PASS) -> screen on / off -> nhanh ko show được passcode (fail)
																															*-> screen off / on -> passcode (PASS)
																															*-> mở từ notify tin nhắn mới -> passcode (PASS) -> input -> Chat (PASS) -> back -> MainTAB (???) -> home -> QR droid -> passcode (PASS) -> input -> profile -> back -> QR Droid

		+ App chưa chạy activity nào  				-> QR droid quét QR profile -> profile -> passcode 	-> input -> profile *-> home -> icon app -> passcode -> MainTab ??? (mở lại task mới)
		
																															*-> back -> vào lại link qr -> passcode (PASS) -> screen on / off -> nhanh ko show được passcode (fail)
																															*-> screen off / on -> passcode (PASS)
																															*-> mở từ notify tin nhắn mới -> passcode (PASS) -> input -> Chat (PASS) -> back -> MainTAB (???) -> home -> QR droid -> passcode (PASS) -> input -> profile -> back -> QR Droid

        + Note: Đi từ QR Droid hoặc third party app thì mở 1 task khác, nên sau khi home vào mở lại icon app sẽ đi vào task khác, không vào được activity trước đó home từ QR Droid		



		+ Inter-process: Vào chỉnh sửa ảnh -> home -> mở từ notify tin nhắn mới -> ko show passcode (FAIL) -> 
			
														


	


  