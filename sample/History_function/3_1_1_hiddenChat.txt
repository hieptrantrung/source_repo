https://zdoc.zing.vn/display/SPEC/OA+thread+folder
https://zdoc.zing.vn/display/SPEC/Hidden+chat

boolean checkPlayEffectWhenUsePasscode = true;

ChatLeftRichMessageMC.java
ChatRowSticker.java
ChatRowText.java

1111 - b59c67bf196a4758191e42f76670ceba

- 	trường hợp qua máy khác remove friend

	qua máy khác remove group

	thì lúc quay lại còn lại các id đã set hidden chat, lúc nay sẽ xử lý sao

- trước đó tồn tại trong ds tìm gần đây, cần xóa đi


- lúc search match mấy ký tự mã pin, có hiện thị kết quả cho các thể loại khác hay ko


- các section của setting hidden chat để trong 1 trang riêng như passcode hay để chung kế setting msg

- màn hình chat lúc đang show pin code sao khi chuyển, home app hoặc mở app khác sao lại phải đóng luôn cửa sổ chat

- màn hình pin code hidden chat show full trang luôn như passcode của app được không, hay phải để 1 phần transparent vì sẽ lộ phần msg bên dưới cửa sổ chat



- Khi bấm vào noti sẽ trả về màn hình Tab tin nhắn.



- Bị lỗi cái layout right menu đè lê cái pin code


- Trường hợp User bị kick, rời nhóm, sync rời nhóm.
  
	 .getGroupList()	-  ZaloBusiness.java
	 public void deleteGroup(String groupId) - DatabaseHelper.java
	 



####################

Tính năng dùng để ẩn thread chat khỏi danh sách tin nhắn, dùng cho chat 1:1, chat group.
User cần cài đặt mã pin để sử dụng tính năng.
Mở các thread chat đã ẩn bằng cách search bằng mã pin hoặc theo tên.




DatabaseChatProxy.getDatabaseChatImpl().deleteMessagesOfFriend(currUID);



##################################################

+ Bỏ qua msg quick reply

startPopupQuickReply(contact, chatContent); - ParseRPSocketConnection.java

if (FriendManager.getInstance().containHiddenChatList(contact.uid) && !TextUtils.isEmpty(SharedPreferencesData.getCodeHiddenChat(MainApplication.getAppContext()))) {

}

+ Bỏ qua noti msg fail

private Runnable showPopupRetryTask = new Runnable() - NotiManager.java


+ Video notify for keep UI avoid kill service

private void pinForeground(VideoMessageParams messageParams) {   - ProcessVideoService.java - full

private void startVideoCompressService()	- ChatContent.java

TASK ### 1

// search to find item match keyword in OA promoted list

filteredFriendsInBackground - SearchGlobalListView.java



##############################

http://stackoverflow.com/questions/20856105/change-the-text-color-of-a-single-clickablespan-when-pressed-without-affecting-o

http://takeoffandroid.com/android-views/android-spannable-text-view-to-change-color-size-style-and-adding-click-event-for-particular-word/

http://eazyprogramming.blogspot.com/2013/06/spannable-string-in-android-url-span.html

http://takeoffandroid.com/android-views/android-spannable-text-view-to-change-color-size-style-and-adding-click-event-for-particular-word/

http://eazyprogramming.blogspot.com/2013/06/spannable-string-in-android-url-span.html


if(!searchListForPage.isEmpty() || !searchListForOAPromoted.isEmpty())
                {
                    mSeeMoreOAEmptySuggest = false;
                    //add label for section
                    ContactProfile p = new ContactProfile(SearchGlobalListView.TYPE_LABEL_SECTION_OA_SEARCH_RESULT);
                    p.dpn = getResources().getString(R.string.zalopagemsg_title);
                    resultSearchList.add(p);

                    //add item for section
                    int size = searchListForPage.size() > mMaxNumOASection ? mMaxNumOASection : searchListForPage.size();
                    for(int j = 0; j < size; j++)
                    {
                        searchListForPage.get(j).sttMessage = Utils.findMatchWordFromArrKeyWord(searchListForPage.get(j).sttMessage.toString(), new ArrayList<String>(Arrays.asList(arraySKey)));
                        resultSearchList.add(searchListForPage.get(j));
                    }

                    int subSize = size < mMaxNumOASection ? (mMaxNumOASection - size) : 0;

                    try {
                        if(subSize > 0)
                        {
                            if(searchListForOAPromoted.size() < subSize)
                                subSize = searchListForOAPromoted.size();

                            for(int l = 0; l < subSize; l++)
                            {
                                if(!existUidsMap.containsKey(searchListForOAPromoted.get(l).uid))
                                {
                                    ContactProfile contactOAPromoted = searchListForOAPromoted.get(l);
                                    contactOAPromoted.sttMessage = Utils.findMatchWordFromArrKeyWord(contactOAPromoted.sttMessage.toString(), new ArrayList<String>(Arrays.asList(arraySKey)));
                                    resultSearchList.add(contactOAPromoted);
                                }
                            }
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }

                    // add see more for section
//                  if(searchListForPage.size() > MAX_NUM_OA_ITEM_HISTORY)//always show see more not depend number of item
                    {
                        ContactProfile p1 = new ContactProfile(SearchGlobalListView.TYPE_LABEL_SEE_FULL_OA_RESULT);
                        p1.dpn = getResources().getString(R.string.label_see_full_search_result);
                        resultSearchList.add(p1);
                    }

                    isFullEmptyResult = false;
                }
                else
                {
                    // add emmpty layout for section contact
                    ContactProfile p1 = new ContactProfile(SearchGlobalListView.TYPE_EMPTY_OA);
                    p1.dpn = getResources().getString(R.string.empty_oa_search_title);
                    p1.arrPosToHighlight.add(p1.dpn.length());
                    p1.dpn = p1.dpn.concat(filterTextHasSign);
                    p1.arrPosToHighlight.add(p1.dpn.length());
                    p1.setCustomMessage(getResources().getString(R.string.empty_oa_search_des));
                    resultSearchList.add(p1);
                    mSeeMoreOAEmptySuggest = true;
                }
				
http://stackoverflow.com/questions/11095222/android-imageview-change-tint-to-simulate-button-click/18724834#18724834

http://blog.syedgakbar.com/2012/07/changing-color-of-the-drawable-or-imageview-at-runtime-in-android/

http://blog.syedgakbar.com/2012/07/changing-color-of-the-drawable-or-imageview-at-runtime-in-android/

http://www.ibm.com/developerworks/java/library/j-mer0918/

http://eazyprogramming.blogspot.in/2013/06/delete-row-in-listview-with-animation.html				



"is_fan":true,
"uid":100251687,
"avt":"http:\/\/avatar.talk.zdn.vn\/5\/9\/1\/9\/625\/75\/2467718b3de72d41c6f566e5dccb7f04.jpg",
"desc":"Đây là trang test của team zalo page Đây là trang test của team zalo page Đây là trang test của team",
"alias":"monstertesttttttttt",
"acl":0,
"stt":"Đây là trang test của team zalo page Đây là trang test của team zalo page Đây là trang test của team",
"ttf":163,
"dpn":"Vip Test 1",
"chatable":true,
"group_msg":1,
"type":5,
"isFan":true


"is_fan":true,
"uid":150728053,
"avt":"http:\/\/avatar.talk.zdn.vn\/e\/2\/7\/5\/5\/75\/022af5eadafeb4ab24d8ad4b141922d6.jpg",
"desc":"Cổng thông tin chính thức của Bộ Y tế trên Zalo, tại đây sẽ cập nhật những thông tin mới nhất về các",
"alias":"boyte",
"acl":0,
"stt":"Cổng thông tin chính thức của Bộ Y tế trên Zalo, tại đây sẽ cập nhật những thông tin mới nhất về các",
"ttf":496622,
"dpn":"Bộ Y tế",
"chatable":true,
"group_msg":1,
"type":5,
"isFan":true

"is_fan":true,
"uid":100378753,
"avt":"http:\/\/avatar.talk.zdn.vn\/b\/d\/0\/5\/21\/75\/07d2b0e1e4284b45f3b74b8f43c9b3e7.jpg",
"desc":"Baomoi là một website tổng hợp thông tin tiếng Việt hoàn toàn được điều khiển tự động bởi máy tính. ",
"alias":"baomoi",
"acl":0,
"stt":"Baomoi là một website tổng hợp thông tin tiếng Việt hoàn toàn được điều khiển tự động bởi máy tính. ",
"ttf":48554842,
"dpn":"Báo Mới",
"chatable":true,
"group_msg":1,
"type":5,
"isFan":true

"is_fan":true,
"uid":101665267,
"avt":"http:\/\/avatar.talk.zdn.vn\/a\/e\/b\/3\/2\/75\/4c4eb443aa20f88be89ce35fc419abf0.jpg",
"desc":"Trang tổng hợp tin tức đời sống & giải trí hàng đầu Việt Nam, với tiêu chí luôn đem đến những thông ",
"alias":"zingvn",
"acl":0,
"stt":"Trang tổng hợp tin tức đời sống & giải trí hàng đầu Việt Nam, với tiêu chí luôn đem đến những thông ",
"ttf":1717891,
"dpn":"Zing.vn",
"chatable":true,
"group_msg":1,
"type":5,
"isFan":true




################################

getGroupInfoForInsertMsg




{
"isFan":true,
"chatable":true,
"type":5,
"acl":1,
"desc":"Bói đê, bói đê…\r\nZalo Bói Vui trả kết quả theo ngày sinh đã khai báo của bạn. Cú pháp tra cứu: #Ngay",
"alias":"zaloboivui",
"uid":100213241,
"dpn":"Zalo Bói Vui",
"ttf":1728733,
"avt":"http:\/\/s120.avatar.talk.zdn.vn\/b\/3\/1\/1\/8\/120\/54f4731eeb8f57c57ec679f025d2fa14.jpg",
"stt":"Bói đê, bói đê…\r\nZalo Bói Vui trả kết quả theo ngày sinh đã khai báo của bạn. Cú pháp tra cứu: #Ngay",
"group_msg":1,
"is_fan":true
}

{
"isFan":true,
"chatable":true,
"type":5,
"acl":0,
"desc":"Sendo.vn là website mua bán trực tuyến của tập đoàn FPT với hơn 600k sản phẩm đa dạng từ hơn 7k Shop",
"alias":"sendo",
"uid":103136333,
"dpn":"Sendo.vn",
"ttf":166439,
"avt":"http:\/\/s120.avatar.talk.zdn.vn\/9\/7\/2\/e\/5\/120\/e13c732b6376f5ac75ec4a400e30fa6c.jpg",
"stt":"Sendo.vn là website mua bán trực tuyến của tập đoàn FPT với hơn 600k sản phẩm đa dạng từ hơn 7k Shop",
"group_msg":1,
"is_fan":true
}

{
"isFan":true,
"chatable":true,
"type":5,
"acl":0,
"desc":"Zing TV – kênh video trực tuyến miễn phí và có bản quyền đầu tiên tại Việt Nam. Với lượng nội dung p",
"alias":"zingtv",
"uid":101671244,
"dpn":"Zing TV",
"ttf":818735,
"avt":"http:\/\/s120.avatar.talk.zdn.vn\/d\/3\/7\/1\/5\/120\/626a2f0e3e324ef052087e8ca65126b7.jpg",
"stt":"Zing TV – kênh video trực tuyến miễn phí và có bản quyền đầu tiên tại Việt Nam. Với lượng nội dung p",
"group_msg":1,
"is_fan":true
}

{
"isFan":true,
"chatable":true,
"type":5,
"acl":0,
"desc":"123Phim, điểm đến tin cậy của tín đồ điện ảnh, với thông tin lịch chiếu phim phong phú và cập nhật l",
"alias":"123phim",
"uid":102364205,
"dpn":"123Phim",
"ttf":413764,
"avt":"http:\/\/s120.avatar.talk.zdn.vn\/e\/3\/a\/a\/6\/120\/00a48ea62af957c1aa21e29580ac15dd.jpg",
"stt":"123Phim, điểm đến tin cậy của tín đồ điện ảnh, với thông tin lịch chiếu phim phong phú và cập nhật l",
"group_msg":1,
"is_fan":true
}

{
"isFan":true,
"chatable":true,
"type":1,
"acl":0,
"desc":"Cung cấp thời trang nữ toàn quốc\r\nĐa số sản phẩm của shop đều kèm ảnh thật, ảnh thế nào hàng thế đó\r",
"alias":"thoitrangnangdong",
"uid":117014205,
"dpn":"Shop Thời trang năng động",
"ttf":319230,
"avt":"http:\/\/s120.avatar.talk.zdn.vn\/2\/1\/e\/0\/6\/120\/ac3cf9eaf8272cccc9a160ede7f9fc6e.jpg",
"stt":"Cung cấp thời trang nữ toàn quốc\r\nĐa số sản phẩm của shop đều kèm ảnh thật, ảnh thế nào hàng thế đó\r",
"group_msg":1,
"is_fan":true
}

{
"isFan":true,
"chatable":true,
"type":1,
"acl":0,
"desc":"Cung cấp thời trang toàn quốc, thanh toán tận nhà\r\nShop có đăng ảnh thật sản phẩm, ảnh thế nào hàng ",
"alias":"thoitrang3a",
"uid":116350600,
"dpn":"Shop Thời Trang 3A",
"ttf":216085,
"avt":"http:\/\/s120.avatar.talk.zdn.vn\/c\/a\/2\/1\/19\/120\/3dc460bc89993ec642cb6648135a78ca.jpg",
"stt":"Cung cấp thời trang toàn quốc, thanh toán tận nhà\r\nShop có đăng ảnh thật sản phẩm, ảnh thế nào hàng ",
"group_msg":1,
"is_fan":true
}

{
"isFan":true,
"chatable":true,
"type":1,
"acl":0,
"desc":"Chuyên bán Bao Da - Ốp Lưng - Phụ Kiện các loại điện thoại. Giao hàng miển phí tại TPHCM, Giao hàng ",
"alias":"phukienlps",
"uid":125489729,
"dpn":"Phụ Kiện Điện Thoại - Máy tính bảng LPS",
"ttf":117153,
"avt":"http:\/\/s120.avatar.talk.zdn.vn\/f\/8\/d\/7\/3\/120\/4729592b5c77dab49926987b16011d80.jpg",
"stt":"Chuyên bán Bao Da - Ốp Lưng - Phụ Kiện các loại điện thoại. Giao hàng miển phí tại TPHCM, Giao hàng ",
"group_msg":1,
"is_fan":true
}

{
"isFan":true,
"chatable":true,
"type":1,
"acl":0,
"desc":"Hãy thỏa sức shopping online cùng shop quần áo rẻ đẹp nhé. \r\nVáy xinh là shop cung cấp các sản phẩm ",
"alias":"shopvayxinh",
"uid":127949328,
"dpn":"Shop Váy Xinh",
"ttf":217846,
"avt":"http:\/\/s120.avatar.talk.zdn.vn\/c\/2\/6\/a\/18\/120\/ab368b6e0213b703bba9e36dc86f2191.jpg",
"stt":"Hãy thỏa sức shopping online cùng shop quần áo rẻ đẹp nhé. \r\nVáy xinh là shop cung cấp các sản phẩm ",
"group_msg":1,
"is_fan":true
}

{
"isFan":true,
"chatable":true,
"type":1,
"acl":0,
"desc":"Giày dép, quần áo cực xinh cho các girl . Chỉ cần để lại số điện thoại để được tư vấn & hướng dẫn mu",
"alias":"katashop",
"uid":125539706,
"dpn":"Kata Fashion",
"ttf":210611,
"avt":"http:\/\/s120.avatar.talk.zdn.vn\/b\/0\/2\/6\/29\/120\/acde9dfc5a7d56eb27b06babd5ef5381.jpg",
"stt":"Giày dép, quần áo cực xinh cho các girl . Chỉ cần để lại số điện thoại để được tư vấn & hướng dẫn mu",
"group_msg":1,
"is_fan":true
}

{
"isFan":true,
"chatable":true,
"type":5,
"acl":0,
"desc":"Cổng thông tin game của Zalo",
"alias":"gamecenter",
"uid":122702420,
"dpn":"Game Center",
"ttf":145398,
"avt":"http:\/\/s120.avatar.talk.zdn.vn\/0\/2\/a\/a\/21\/120\/ac9aae411b9f4a69821801fde59341d2.jpg",
"stt":"Cổng thông tin game của Zalo",
"group_msg":1,
"is_fan":true
}



//          if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
//              SharedPreferences myPrefs = context.getSharedPreferences(SharedPreferencesData.APP_NAME_PREF, Context.MODE_MULTI_PROCESS);
//              String currentUid = myPrefs.getString(SharedPreferencesData.CURRENT_USER_UID, "");
//              valueLanguage = myPrefs.getString(String.format(SharedPreferencesData.CURRENT_LANGUAGE_SETTING, currentUid), LanguageType.VI_VN_CODE);
//          } else {
//              SharedPreferences myPrefs = context.getSharedPreferences(SharedPreferencesData.APP_NAME_PREF, Context.MODE_PRIVATE);
//              String currentUid = myPrefs.getString(SharedPreferencesData.CURRENT_USER_UID, "");
//              valueLanguage = myPrefs.getString(String.format(SharedPreferencesData.CURRENT_LANGUAGE_SETTING, currentUid), LanguageType.VI_VN_CODE);
//          }


StartUpView
//      strLang = SharedPreferencesData.getLanguageSettingWithoutUserId(MainApplication.getAppContext());    //getLanguageSetting(MainApplication.getAppContext());
//
//        try {
//            Configuration config = getResources().getConfiguration();
//
//            if (config != null && !config.locale.getLanguage().equals(strLang)) {
//                Locale locale = new Locale(strLang);
//                config.locale = locale;
//                getResources().updateConfiguration(config, MainApplication.getAppContext().getResources().getDisplayMetrics());
//            }
//        } catch (Exception e) {
//
//        }

String strLang = Utils.getLanguageSetting(MainApplication.getAppContext());
        Configuration config = getResources().getConfiguration();

        try {
            if (config != null && !config.locale.getLanguage().equals(strLang)) {
                Locale locale = new Locale(strLang);
                config.locale = locale;
                getResources().updateConfiguration(config, MainApplication.getAppContext().getResources().getDisplayMetrics());
            }
        } catch (Exception e) {

        }

		
		
RecordingVideoZActivity   -> move setting language to BaseZaloActivity
VideoReceiverProxyZActivity	
EffectsZActivity


CropImageZActivity    -> MonitoredZActivity -> BaseZaloActivity	


LocaleUtils.getLanguageSetting(MainApplication.getAppContext(), MainApplication.IS_RUN_ON_ZALO_PROCESS);

// after login or change language
String strLanguage = SharedPreferencesData.getLanguageSettingWithoutUserId(MainApplication.getAppContext());
SharedPreferencesData.setCurrentLanguageSetting(MainApplication.getAppContext(), strLanguage, true); //sync value from DB to preference
SharedPreferencesData.setCurrentLanguageSetting(MainApplication.getAppContext(), strLanguage, false); //sync value from DB to preference
				
				
				
SharedPreferencesData.setLanguageSettingWithoutUserId(MainApplication.getAppContext(), strLanguage);
Dùng 2 chỗ, 
				